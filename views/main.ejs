<!DOCTYPE html>
<html lang="en">

<head>
    <% include navi/head %>
    <link href="css/wallet/login.css" rel="stylesheet">
</head>

<body>
    <div class="container h-100">
        <div class="d-flex justify-content-center h-100">
            <div class="login_card">
                <div class="d-flex justify-content-center">
                    <div class="logo_container">
                        <img src="images/pig.jpg" class="logo" alt="Logo">
                    </div>
                </div>
                <div class="form_container">
                    <form>
                            <div class="login_container">
                                <h5 class="login_name"><%= userid %></h5>
                                <p class="public_key" style="text-align: center;"><%= public_key %></p>
                                <h3  class="login_name"><%= balance %> Ether</h3>
                            </div>

                        <div class="login_container">
                            <h6 class="txhash"><% for(let j = 0; j < 3; j++) { %>
                                <a href="https://ropsten.etherscan.io/tx/<%= txhash_list[j] %>" style="color:#7C7C7C"></style>
                                    <%=  txhash_list[j] %></a>
                                <% } %>
                            </h6>
                        </div>

                        <div class="d-flex justify-content-center md-1 login_container">
                            <button type="button" id="getEther" class="btn login_btn">getEther</button>
                            <button type="button" id="account" class="btn login_btn">account</button>
                        </div>
                            <div class="d-flex justify-content-center md-1 login_container">
                            <button type="button" id="send" class="btn login_btn">send</button>
                            <button type="button" id="logout" class="btn login_btn">logout</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <script>
        $('#send').click(function () {
            window.location.href = 'http://localhost:3000/send'
        });

        $('#logout').click(function () {
            $.ajax({
                url: 'http://localhost:3000/main/session_destroy',
                success: function (result, body, { status }) {
                    window.location.href = 'http://localhost:3000/'
                }
            });
        })

        $('#getEther').click(function () {
            $.ajax({
                url: 'https://faucet.metamask.io/',
                dataType: 'json',
                type: 'POST',
                data: $('#publickey').text(),
                success: function (result, body, { status }) {
                    $.ajax({
                        url: 'http://localhost:3000/main/deposit',
                        dataType: 'json',
                        type: 'POST',
                        data: result
                    })
                }
            });
        })

        $('#account').click(function () {
            window.location.href = 'http://localhost:3000/main/private'
        });
    </script>
</body>

</html>